<!DOCTYPE HTML>
<html>
  <head>
    <meta name="generator"
    content="HTML Tidy for HTML5 (experimental) for Windows https://github.com/w3c/tidy-html5/tree/c63cc39" />
    <meta charset="utf-8" />
    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport" />
    <title></title>
    <!-- <script src="/phpMyAdmin/js/jquery.cookie.js?4.11.94"></script> -->
    <!-- <script src="/phpMyAdmin/js/jquery.more.extend.js?4.11.94"></script> -->
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/jquery.slimscroll.min.js"></script>
    <script src="js/spin.js"></script>
    <script type="text/javascript">
    		jQuery(document).ready(function ($) {
    			$('#inner-content').slimScroll({
    				height: '20px';
    			});
    		});
    </script>
    <script type="text/javascript">
    		$.get('check_login.php', function(data) {
          var doc = '';
          if (data)
          {
              doc = data;
              document.getElementById('light').style.display='none';
              document.getElementById('fade').style.display='none';
          }else {
              doc = '<a href = "javascript:void(0)" onclick = "LoginBtnClick()">登录</a>';
              document.getElementById('light').style.display='block';
              document.getElementById('fade').style.display='block';
          }
    			$('#login_info').html(doc);
          // alert(doc);
    		});
    </script>
    <script type="text/javascript">
    function LoginBtnClick(){
      document.getElementById('light').style.display='block';
      document.getElementById('fade').style.display='block';
    }
    function CancelLoginBtnClick(){
      document.getElementById('light').style.display='none';
      document.getElementById('fade').style.display='none';
    }
    </script>
    <script type="text/javascript">
      // var target = document.getElementById('spin');
      // var spinner;
      function GetServerListAndRefreshUI(){
        // spinner = new Spinner().spin(target);
        $.get('GetServerList.php', function(data){
          // alert('请求服务器列表：' + data);
          RefreshServerList();
        });
      }

      function RefreshUI()
      {
        $.get('refresh_UI.php', function(data){
          $('#option-ui').html(data);
          // alert(data);
        });
      }

      function RefreshServerList(){
        $.get('refresh_server_list.php', function(data) {
          $('#inner-content').html(data);
          // spinner.spin();
        });
        RefreshUI();
      }

      setInterval(function(){
    		GetServerListAndRefreshUI();
      }, 30000);

      GetServerListAndRefreshUI();
    </script>
    <script type="text/javascript">
      function SelectServer(e){
        var id = e.getAttribute("server_id");
    		$.get('SelectServer.php?SID=' + id, function(data) {
          // alert('选择服务器信息：' + data);
    			GetServerListAndRefreshUI();
    		});
      }
    </script>
    <script type="text/javascript">
      function SelectSubServer(e){
        var id = e.getAttribute("server_id");
        var name = e.getAttribute("server_name");

        // alert('选中的服务器名字：' + name);
        $.get('SelectServer.php?SID=' + id + '&SName=' + name, function(data) {
          RefreshServerList();
        });
      }
    </script>
<style>
.black_overlay{
    display: none;
    position: absolute;
    top: 0%;
    left: 0%;
    width: 100%;
    height: 100%;
    background-color: black;
    z-index:1001;
    -moz-opacity: 0.8;
    opacity:.80;
    filter: alpha(opacity=88);
}
.white_content {
    display: none;
    position: absolute;
    left:50%;
    margin-left:-170px;
    top:50%;
    margin-top:-210px;
    width: 340px;
    height: 420px;
    padding: 20px;
    border: 10px solid orange;
    background-color: white;
    z-index:9999;
    overflow: auto;
}
</style>
  </head>
  <body>
  <div class="spin"></div>
	<!-- 左侧服务器列表 -->
    <div class="m-splitter-left left-container" style="border-right:3px solid #ccc; float:left; width:200px;">
      <b>服务器列表</b>
      <div id="inner-content">
	  </div>
    </div>

	<!-- 右侧主界面区域 -->
    <div class="main_partant_div">
    <div id="login_info" align="right" style="margin-right: 10px;">
      <!-- 根据登录状态刷新此处显示 -->
    </div>
		<div id='option-ui' align='left' style="margin-left: 210px; margin-top: 10px;">
		</div>
	</div>
  <div id="light" class="white_content" align="center">
    <img src="logo.jpg">
    <form action="login.php" method="GET">
        用户名：<input type="text" name="username" /><br>
        密&emsp;码：<input type="password" name="password" />
        <br/><br/>
        <input type="submit" value="登录">
        <a href = "javascript:void(0)" onclick = "CancelLoginBtnClick()">取消</a>
    </form>
    </div>
  <div id="fade" class="black_overlay"></div>
  </body>
</html>
